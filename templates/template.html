<!DOCTYPE html>
<html lang="vi">
    <head>
        <title>Transform audio file to text</title>
        <meta charset="UTF-8">
        <h1 style="font-family: Consolas">Wellcome to my website</h1>
    </head>
    <body>
        <script type="text/javascript">
            function previewFile() {
                const preview = document.querySelector('audio');
                //const preview = document.querySelector('img');
                const file = document.querySelector('input[type=file]').files[0];
                const reader = new FileReader();
                reader.addEventListener("load", function() {
                    preview.src = reader.result; // show image in <img> tag
                    uploadFile(file)
                }, false);
                if (file) {
                    reader.readAsDataURL(file);
                }
            }

            function uploadFile(file) {
                var formData = new FormData();
                formData.append('file', file);
                fetch('/upload', {
                        method: 'POST',
                        body: formData,
                    })
                    .then(response => {
                        console.log(response);
                        alert("Successfuly uploaded your audio!!!");
                        //let btn = document.createElement("button");
                        //btn.innerHTML = "Dá»‹ch";
                        //btn.addEventListener("click", function () {
                        //    fetch('/to_text', {
                        //        method: 'GET',
                        //    })
                        //    .then(response => {
                        //        console.log(response);
                        //        document.getElementById("text").innerHTML = response;
                        //    });
                        //});
                        //document.body.appendChild(btn);
                    })
                    .catch(error => {
                        console.error(error);
                    });
            }

        </script>
        <input type="file" onchange="previewFile()"><br>
        <!--<img src="" height="200" alt="Image preview...">-->
        <audio controls>
            <source src="" type="audio/ogg">
            <source src="" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio><br>
        <p id="text"></p>
    </body>
</html>


<!--<html>
   <body>
      <form method="post" action="/upload"  enctype="multipart/form-data">   
         <label for="file">Choose image to upload</label>
         <input type="file" id="files" name="file"><br> 
         <input type="submit" value="Upload">
      </form>
   </body>
</html>-->
